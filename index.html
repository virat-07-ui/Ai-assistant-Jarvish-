<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jarvish AI</title>

<style>
body{
    margin:0;
    background:#0b0b0b;
    color:#00ffe1;
    font-family:Arial, sans-serif;
    text-align:center;
    overflow:hidden;
}
canvas{display:block;}
h1{margin-top:15px;}
#status{color:#0f0;margin:8px;}
#messages{
    height:60vh;
    overflow-y:auto;
    padding:10px;
    border-top:1px solid #333;
    border-bottom:1px solid #333;
}
.msg-user{color:#fff;text-align:right;margin:5px;}
.msg-ai{color:#00ffe1;text-align:left;margin:5px;}
#controls{
    position:fixed;
    bottom:0;
    width:100%;
    background:#111;
    padding:10px;
}
button{
    padding:10px 14px;
    margin:4px;
    background:#00ffe1;
    border:none;
    border-radius:5px;
    font-weight:bold;
}
input{
    padding:10px;
    width:70%;
    border-radius:5px;
    border:none;
}
</style>
</head>

<body>

<h1>JARVISH AI</h1>
<div id="status">SYSTEM ONLINE</div>
<button onclick="unlockVoice()">üîä Enable Voice</button>
<button onclick="startListening()">üé§ Speak</button>

<div id="messages"></div>

<div id="controls">
    <input id="userInput" placeholder="Type or speak command..." />
    <button onclick="sendText()">Send</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
// ===== THREE.JS VISUALIZER (UNCHANGED LOGIC) =====
let scene=new THREE.Scene();
scene.fog=new THREE.FogExp2(0x000000,0.002);

let camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,0,100);

let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0x00ff99,0.7));
let pl=new THREE.PointLight(0x00ff99,1.5);
pl.position.set(0,0,50);
scene.add(pl);

let core=new THREE.Mesh(
    new THREE.SphereGeometry(8,64,64),
    new THREE.MeshStandardMaterial({
        color:0x00ff99,
        emissive:0x00ff99,
        emissiveIntensity:1,
        roughness:0.2,
        metalness:0.8
    })
);
scene.add(core);

let torusGroup=new THREE.Group();
scene.add(torusGroup);
for(let i=0;i<3;i++){
    let t=new THREE.Mesh(
        new THREE.TorusGeometry(20+i*12,0.5,16,100),
        new THREE.MeshStandardMaterial({
            color:0x00ff99,
            emissive:0x00ff99,
            transparent:true,
            opacity:0.5
        })
    );
    t.rotation.x=Math.random()*Math.PI;
    t.rotation.y=Math.random()*Math.PI;
    torusGroup.add(t);
}

let pc=2000,pos=new Float32Array(pc*3);
for(let i=0;i<pc;i++){
    pos[i*3]=(Math.random()-0.5)*120;
    pos[i*3+1]=(Math.random()-0.5)*120;
    pos[i*3+2]=(Math.random()-0.5)*120;
}
let particles=new THREE.Points(
    new THREE.BufferGeometry().setAttribute('position',new THREE.BufferAttribute(pos,3)),
    new THREE.PointsMaterial({color:0x00ff99,size:1.5,transparent:true,opacity:0.8,blending:THREE.AdditiveBlending})
);
scene.add(particles);

navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    const ctx=new AudioContext();
    const analyser=ctx.createAnalyser();
    analyser.fftSize=256;
    ctx.createMediaStreamSource(stream).connect(analyser);
    const data=new Uint8Array(analyser.frequencyBinCount);

    function animate(){
        requestAnimationFrame(animate);
        analyser.getByteFrequencyData(data);
        let avg=data.reduce((a,b)=>a+b)/data.length;

        core.scale.setScalar(1+avg/300);
        core.material.emissiveIntensity=0.7+avg/300;

        torusGroup.children.forEach((t,i)=>{
            t.rotation.x+=0.002+avg/50000*(i+1);
            t.rotation.y+=0.001+avg/50000*(i+1);
        });

        particles.rotation.y+=0.002+avg/50000;
        particles.rotation.x+=0.001;

        renderer.render(scene,camera);
    }
    animate();
});

// ===== VOICE AI (ALL COMMANDS RESTORED) =====
let voiceUnlocked=false;
function unlockVoice(){
    const u=new SpeechSynthesisUtterance("Jarvish voice activated");
    u.lang="hi-IN";
    speechSynthesis.speak(u);
    voiceUnlocked=true;
    status.innerText="VOICE ENABLED";
}

function speak(text){
    if(!voiceUnlocked) return;
    const u=new SpeechSynthesisUtterance(text);
    u.lang="hi-IN";
    speechSynthesis.speak(u);
}

let recognition;
const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
if(SR){
    recognition=new SR();
    recognition.lang="hi-IN";
    recognition.onresult=e=>{
        const text=e.results[0][0].transcript;
        addUser(text);
        respond(text);
    };
}
function startListening(){ recognition.start(); }

function addUser(t){
    messages.innerHTML+=`<div class="msg-user">You: ${t}</div>`;
}
function addAI(t){
    messages.innerHTML+=`<div class="msg-ai">Jarvish: ${t}</div>`;
}

// ===== ORIGINAL COMMANDS (FULL) =====
function respond(text){
    let t=text.toLowerCase();
    let reply="‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§";

    if(t.includes("open youtube")){ reply="‡§Ø‡•Ç‡§ü‡•ç‡§Ø‡•Ç‡§¨ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://youtube.com"); }
    else if(t.includes("open instagram")){ reply="‡§á‡§Ç‡§∏‡•ç‡§ü‡§æ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://instagram.com"); }
    else if(t.includes("open facebook")){ reply="‡§´‡•á‡§∏‡§¨‡•Å‡§ï ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://facebook.com"); }
    else if(t.includes("open whatsapp")){ reply="‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://web.whatsapp.com"); }
    else if(t.includes("open google")){ reply="‡§ó‡•Ç‡§ó‡§≤ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://google.com"); }
    else if(t.includes("open gmail")){ reply="‡§ú‡•Ä‡§Æ‡•á‡§≤ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://mail.google.com"); }
    else if(t.includes("open twitter")||t.includes("open x")){ reply="‡§ü‡•ç‡§µ‡§ø‡§ü‡§∞ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://x.com"); }
    else if(t.includes("open snapchat")){ reply="‡§∏‡•ç‡§®‡•à‡§™‡§ö‡•à‡§ü ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://snapchat.com"); }
    else if(t.includes("open amazon")){ reply="‡§Ö‡§Æ‡•á‡§ú‡§º‡§® ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://amazon.in"); }
    else if(t.includes("open flipkart")){ reply="‡§´‡•ç‡§≤‡§ø‡§™‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://flipkart.com"); }
    else if(t.includes("open play store")){ reply="‡§™‡•ç‡§≤‡•á ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://play.google.com"); }
    else if(t.includes("open maps")){ reply="‡§ó‡•Ç‡§ó‡§≤ ‡§Æ‡•à‡§™‡•ç‡§∏ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://maps.google.com"); }
    else if(t.includes("open chrome")){ reply="‡§ï‡•ç‡§∞‡•ã‡§Æ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://google.com"); }
    else if(t.includes("open calculator")){ reply="‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.open("https://www.google.com/search?q=calculator"); }
    else if(t.includes("call rahul")){ reply="‡§∞‡§æ‡§π‡•Å‡§≤ ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å"; window.location.href="tel:9876543210"; }
    else if(t.includes("time")){ reply="‡§Ö‡§≠‡•Ä ‡§∏‡§Æ‡§Ø ‡§π‡•à "+new Date().toLocaleTimeString(); }
    else if(t.includes("date")){ reply="‡§Ü‡§ú ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§π‡•à "+new Date().toLocaleDateString(); }
    else if(t.includes("who are you")||t.includes("tum kaun ho")){ reply="‡§Æ‡•à‡§Ç ‡§ú‡§æ‡§∞‡•ç‡§µ‡§ø‡§∂ ‡§π‡•Ç‡§Å, ‡§Ü‡§™‡§ï‡§æ AI ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü"; }
    else if(t.includes("hello")||t.includes("‡§π‡•á‡§≤‡•ã")){ reply="‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Æ‡•à‡§Ç ‡§ú‡§æ‡§∞‡•ç‡§µ‡§ø‡§∂ ‡§π‡•Ç‡§Å"; }
    else if(t.includes("thanks")||t.includes("‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶")){ reply="‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à"; }

    addAI(reply);
    speak(reply);
}

function sendText(){
    let t=userInput.value;
    if(!t) return;
    addUser(t);
    respond(t);
    userInput.value="";
}
</script>
</body>
</html>
